---
import Layout from '../../layouts/Layout.astro';
import { getTiendapyPosts } from '@/lib/tiendapy';

const posts = await getTiendapyPosts({ limit: 10 });
---

<Layout
	title="TiendaPy"
	description="Notas y novedades sobre TiendaPy, con aprendizajes y decisiones técnicas del proyecto."
	canonical="https://www.nicolasmontiel.dev/tiendapy"
>
	<section class="flex flex-col gap-8 py-10">
		<h1 class="text-5xl text-slate-900 font-extrabold tracking-tight">
            TiendaPy<span class="text-indigo-600">:</span> <br />Crónicas de un SaaS en Paraguay
        </h1>

            <p class="text-lg text-slate-600">
                ¡Buenas! Si llegaste hasta acá, es porque te interesa ver cómo se construye un producto desde las trincheras.
            </p>

            <div class="bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-r-xl">
                <p class="text-slate-900 font-semibold mb-2 text-xl">¿Qué es TiendaPy?</p>
                <p class="text-slate-700 leading-relaxed">
                    Es mi apuesta para digitalizar el comercio local. No es otro clon de Shopify; es una plataforma SaaS diseñada exclusivamente para el mercado paraguayo. El foco es que cualquier emprendedor o empresa pueda gestionar su e-commerce de forma eficiente.
                </p>
            </div>

            <p class="text-slate-600 leading-relaxed italic">
                Soy ingeniero de software con casi 8 años de experiencia, pero esta es mi primera vez emprendiendo. Sé tirar líneas de código, pero estoy aprendiendo a vender, a mercadear y a entender qué quiere el usuario paraguayo.
            </p>

            <p>
                <b>Cero humo, mucha realidad</b> <br />
                Mi idea es mostrarte el camino REAL. No vas a leer frases motivacionales de Instagram ni el "camino de oro" al éxito. Nadie tiene la clave para emprender, y el que te diga lo contrario, te está queriendo vender un curso.
            </p>

            <div>
                <strong>Acá vas a ver:</strong>
                <ul class="list-disc list-inside">
                    <li>Decisiones de arquitectura de las que me arrepentí.</li>
                    <li>La frustración de cuando nadie entra a la web y el hype de la primera venta.</li>
                    <li>Estrategias que fallaron estrepitosamente.</li>
                </ul>
            </div>

            <p>Sin filtros y sin romantizar el caos. Si sale bien, festejamos; si sale mal, al menos queda el registro de por qué falló.</p>
        </div>
	</section>

	<section class="mt-20">
		<div class="flex justify-between items-center mb-10">
			<h2 class="text-3xl text-slate-900 font-bold">Bitácora de desarrollo</h2>
		</div>

		{posts.length === 0 ? (
			<p class="text-slate-500">No hay posts publicados todavía.</p>
		) : (
			<div class="grid gap-12">
				{posts.map(post => (
					<article class="group relative flex flex-col gap-4">
						<div class="flex items-center gap-4 text-sm font-medium">
							<time class="text-slate-500">
                                {new Date(post.published_at).toLocaleDateString('es-PY', { day: 'numeric', month: 'long', year: 'numeric' })}
                            </time>
							<span class="w-1 h-1 rounded-full bg-slate-300"></span>
							<span class="text-indigo-600">{post.reading_time_minutes} min read</span>
						</div>

						<h3 class="text-2xl text-slate-900 font-bold group-hover:text-indigo-600 transition-colors">
                            <a href={`/tiendapy/${post.slug}`}>
                                {post.title}
                            </a>
                        </h3>

						{post.tags.length > 0 && (
							<div class="flex gap-2">
								{post.tags.map(tag => (
									<span class="px-2 py-0.5 rounded text-[10px] bg-slate-100 text-slate-600 font-bold uppercase tracking-wider">{tag}</span>
								))}
							</div>
						)}

						{post.excerpt && <p class="text-slate-600 leading-relaxed text-sm lg:text-base line-clamp-3">{post.excerpt}</p>}

						<div class="pt-2">
							<a class="text-indigo-600 font-bold text-sm inline-flex items-center gap-1 hover:gap-2 transition-all" href={`/tiendapy/${post.slug}`}>
								Seguir leyendo <span>→</span>
							</a>
						</div>
					</article>
				))}
			</div>
		)}
	</section>
</Layout>
